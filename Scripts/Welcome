#!/bin/sh
#
# Dependencies:
#   chromium, scite, mi-casa/caja
#   nautilus, tmux, htop
#   xmodmap, xbindkeys, xdotool

HOSTNAME=`hostname`

if [[ $HOSTNAME == "Babbage" ]]; then
    # workspace computer

    chromium 2>/dev/null&

    scite 2>/dev/null&

    mi-casa $HOME/_.mur

else
    # home computer

    # initialize X key bindings
    xmodmap ~/.Xmodmap
    killall -q xbindkeys; xbindkeys

    # connect to SFTP remote points using nautilus
    if [[ $HOSTNAME == "Seele" ]]; then
        nautilus sftp://soimort@hope 2>/dev/null&
    elif [[ $HOSTNAME == "Hope" ]]; then
        nautilus sftp://soimort@seele sftp://seele 2>/dev/null&
    fi
    sleep 2  # wait a short while until it's done

    scite 2>/dev/null&

    tmux new-session -d 'htop'
    # if something goes wrong, show error message forever
    tmux split-window -l 1 -v "mi-casa $HOME/_.mur || sleep infinity"
    tmux -2 attach-session -d
fi
